@model GameDevKz.Server.Model.ParticipationRequest
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "Детали заявки";
}

<div class="p-6 max-w-3xl mx-auto">
    <div class="bg-white shadow rounded-xl p-6">
        <div class="flex justify-between items-start mb-4">
            <div>
                <h1 class="text-xl font-semibold">@Model.FullName</h1>
                <div class="text-sm text-gray-500">@Model.Email • @Model.Phone</div>
                <div class="text-xs text-gray-400 mt-1">Создано: @Model.CreatedAt.ToString("yyyy-MM-dd HH:mm")</div>
            </div>

            <div class="text-right">
                <div class="mb-2">
                    <span class="px-2 py-1 rounded text-sm
                        @(Model.Status == GameDevKz.Server.Model.ParticipationRequest.ParticipationStatus.Pending ? "bg-yellow-100 text-yellow-800" :
                                                    Model.Status == GameDevKz.Server.Model.ParticipationRequest.ParticipationStatus.Approved ? "bg-green-100 text-green-800" :
                                                    "bg-red-100 text-red-800")">
                        @Model.Status
                    </span>
                </div>

                <div class="flex gap-2">
                    <form asp-area="Admin" asp-controller="EventsAdmin" asp-action="ChangeRequestStatus" method="post">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="id" value="@Model.Id" />
                        <input type="hidden" name="status" value="Approved" />
                        <button type="submit" class="px-3 py-1 bg-green-600 text-white rounded">Одобрить</button>
                    </form>

                    <form asp-area="Admin" asp-controller="EventsAdmin" asp-action="ChangeRequestStatus" method="post">
                        @Html.AntiForgeryToken()
                        <input type="hidden" name="id" value="@Model.Id" />
                        <input type="hidden" name="status" value="Rejected" />
                        <button type="submit" class="px-3 py-1 bg-red-600 text-white rounded">Отклонить</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="mb-4">
            <h2 class="text-sm text-gray-600 mb-1">Сообщение</h2>
            <div class="text-gray-800">@Model.Message ?? <span class="text-gray-400">(нет)</span></div>
        </div>

        <div class="flex gap-3 mt-6">
            <a asp-area="Admin" asp-controller="EventsAdmin" asp-action="Requests" asp-route-eventId="@Model.EventId"
               class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300">К списку заявок</a>

            <form asp-area="Admin" asp-controller="EventsAdmin" asp-action="DeleteRequest" method="post" onsubmit="return confirm('Удалить заявку?');">
                @Html.AntiForgeryToken()
                <input type="hidden" name="id" value="@Model.Id" />
                <button type="submit" class="px-4 py-2 bg-red-500 text-white rounded">Удалить заявку</button>
            </form>
        </div>
    </div>
</div>
